import streamlit as st
import pandas as pd

# ----------------------
# ðŸ“¦ à¹‚à¸«à¸¥à¸”à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸£à¹‰à¸²à¸™à¸­à¸²à¸«à¸²à¸£
# ----------------------
# à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹€à¸šà¸·à¹‰à¸­à¸‡à¸•à¹‰à¸™ (à¸„à¸¸à¸“à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¹€à¸›à¹‡à¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ˆà¸£à¸´à¸‡à¹„à¸”à¹‰)
data = pd.DataFrame([
    {"à¸Šà¸·à¹ˆà¸­à¸£à¹‰à¸²à¸™": "à¸‚à¹‰à¸²à¸§à¸‚à¸²à¸«à¸¡à¸¹à¹‚à¸à¹€à¸­à¸", "à¸›à¸£à¸°à¹€à¸ à¸—": "à¸­à¸²à¸«à¸²à¸£à¸ˆà¸²à¸™à¹€à¸”à¸µà¸¢à¸§", "à¸£à¸²à¸„à¸²": 50, "à¸žà¸·à¹‰à¸™à¸—à¸µà¹ˆ": "à¸›à¸£à¸°à¸•à¸¹ 1", "à¹€à¸§à¸¥à¸²": ["à¸à¸¥à¸²à¸‡à¸§à¸±à¸™", "à¹€à¸¢à¹‡à¸™"]},
    {"à¸Šà¸·à¹ˆà¸­à¸£à¹‰à¸²à¸™": "à¸›à¸´à¹‰à¸‡à¸¢à¹ˆà¸²à¸‡à¸¥à¸¸à¸‡à¸«à¸¡à¸µ", "à¸›à¸£à¸°à¹€à¸ à¸—": "à¸›à¸´à¹‰à¸‡à¸¢à¹ˆà¸²à¸‡", "à¸£à¸²à¸„à¸²": 189, "à¸žà¸·à¹‰à¸™à¸—à¸µà¹ˆ": "à¸›à¸£à¸°à¸•à¸¹ 4", "à¹€à¸§à¸¥à¸²": ["à¹€à¸¢à¹‡à¸™"]},
    {"à¸Šà¸·à¹ˆà¸­à¸£à¹‰à¸²à¸™": "à¹‚à¸‹à¸¥à¸Šà¸²à¸šà¸¹", "à¸›à¸£à¸°à¹€à¸ à¸—": "à¸Šà¸²à¸šà¸¹", "à¸£à¸²à¸„à¸²": 299, "à¸žà¸·à¹‰à¸™à¸—à¸µà¹ˆ": "à¸›à¸£à¸°à¸•à¸¹ 4", "à¹€à¸§à¸¥à¸²": ["à¸à¸¥à¸²à¸‡à¸§à¸±à¸™", "à¹€à¸¢à¹‡à¸™"]},
    {"à¸Šà¸·à¹ˆà¸­à¸£à¹‰à¸²à¸™": "à¸­à¸²à¸«à¸²à¸£à¸•à¸²à¸¡à¸ªà¸±à¹ˆà¸‡à¸›à¹‰à¸²à¸«à¸™à¹ˆà¸­à¸¢", "à¸›à¸£à¸°à¹€à¸ à¸—": "à¸­à¸²à¸«à¸²à¸£à¸•à¸²à¸¡à¸ªà¸±à¹ˆà¸‡", "à¸£à¸²à¸„à¸²": 45, "à¸žà¸·à¹‰à¸™à¸—à¸µà¹ˆ": "à¹ƒà¸™ à¸¡à¸—à¸ª.", "à¹€à¸§à¸¥à¸²": ["à¹€à¸Šà¹‰à¸²", "à¸à¸¥à¸²à¸‡à¸§à¸±à¸™"]},
    {"à¸Šà¸·à¹ˆà¸­à¸£à¹‰à¸²à¸™": "à¸£à¹‰à¸²à¸™à¸ªà¹‰à¸¡à¸•à¸³à¹€à¸ˆà¹Šà¹à¸•à¹‹à¸§", "à¸›à¸£à¸°à¹€à¸ à¸—": "à¸­à¸²à¸«à¸²à¸£à¸­à¸µà¸ªà¸²à¸™", "à¸£à¸²à¸„à¸²": 60, "à¸žà¸·à¹‰à¸™à¸—à¸µà¹ˆ": "à¸›à¸£à¸°à¸•à¸¹ 1", "à¹€à¸§à¸¥à¸²": ["à¸à¸¥à¸²à¸‡à¸§à¸±à¸™"]}
])

# ----------------------
# ðŸŽ¯ à¸ªà¹ˆà¸§à¸™à¸£à¸±à¸šà¸„à¹ˆà¸²à¸ˆà¸²à¸à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰
# ----------------------
st.title("ðŸ› à¹à¸™à¸°à¸™à¸³à¸£à¹‰à¸²à¸™à¸­à¸²à¸«à¸²à¸£à¸£à¸­à¸š à¸¡à¸—à¸ª.")

st.subheader("à¹€à¸¥à¸·à¸­à¸à¸¥à¸±à¸à¸©à¸“à¸°à¸£à¹‰à¸²à¸™à¸­à¸²à¸«à¸²à¸£à¸—à¸µà¹ˆà¸„à¸¸à¸“à¸•à¹‰à¸­à¸‡à¸à¸²à¸£")

# 1. à¸›à¸£à¸°à¹€à¸ à¸—à¸­à¸²à¸«à¸²à¸£
food_type = st.selectbox(
    "à¸„à¸¸à¸“à¸­à¸¢à¸²à¸à¸—à¸²à¸™à¸­à¸²à¸«à¸²à¸£à¸›à¸£à¸°à¹€à¸ à¸—à¹ƒà¸”?",
    sorted(data["à¸›à¸£à¸°à¹€à¸ à¸—"].unique())
)

# 2. à¸‡à¸šà¸›à¸£à¸°à¸¡à¸²à¸“
budget = st.selectbox(
    "à¸‡à¸šà¸›à¸£à¸°à¸¡à¸²à¸“à¸•à¹ˆà¸­à¸¡à¸·à¹‰à¸­ (à¸šà¸²à¸—)",
    ["à¹„à¸¡à¹ˆà¹€à¸à¸´à¸™ 50", "50â€“100", "100â€“200", "200+"]
)

# 3. à¸Šà¹ˆà¸§à¸‡à¹€à¸§à¸¥à¸²
time = st.selectbox(
    "à¸„à¸¸à¸“à¸ˆà¸°à¹„à¸›à¸—à¸²à¸™à¹ƒà¸™à¸Šà¹ˆà¸§à¸‡à¹€à¸§à¸¥à¸²à¹ƒà¸”?",
    ["à¹€à¸Šà¹‰à¸²", "à¸à¸¥à¸²à¸‡à¸§à¸±à¸™", "à¹€à¸¢à¹‡à¸™"]
)

# 4. à¸žà¸·à¹‰à¸™à¸—à¸µà¹ˆ
area = st.selectbox(
    "à¸„à¸¸à¸“à¸ªà¸°à¸”à¸§à¸à¹„à¸›à¸—à¸²à¸™à¸—à¸µà¹ˆà¸šà¸£à¸´à¹€à¸§à¸“à¹ƒà¸”?",
    sorted(data["à¸žà¸·à¹‰à¸™à¸—à¸µà¹ˆ"].unique())
)

# ----------------------
# ðŸ” à¹€à¸‡à¸·à¹ˆà¸­à¸™à¹„à¸‚à¸à¸²à¸£à¸à¸£à¸­à¸‡à¸£à¹‰à¸²à¸™à¸­à¸²à¸«à¸²à¸£
# ----------------------

# à¹à¸›à¸¥à¸‡à¸‡à¸šà¸›à¸£à¸°à¸¡à¸²à¸“à¹€à¸›à¹‡à¸™à¸•à¸±à¸§à¹€à¸¥à¸‚
def budget_to_range(budget_label):
    if budget_label == "à¹„à¸¡à¹ˆà¹€à¸à¸´à¸™ 50":
        return 0, 50
    elif budget_label == "50â€“100":
        return 50, 100
    elif budget_label == "100â€“200":
        return 100, 200
    else:
        return 200, 10000

min_price, max_price = budget_to_range(budget)

filtered = data[
    (data["à¸›à¸£à¸°à¹€à¸ à¸—"] == food_type) &
    (data["à¸£à¸²à¸„à¸²"] >= min_price) & (data["à¸£à¸²à¸„à¸²"] <= max_price) &
    (data["à¸žà¸·à¹‰à¸™à¸—à¸µà¹ˆ"] == area) &
    (data["à¹€à¸§à¸¥à¸²"].apply(lambda x: time in x))
]

# ----------------------
# âœ… à¹à¸ªà¸”à¸‡à¸œà¸¥à¸¥à¸±à¸žà¸˜à¹Œ
# ----------------------
st.subheader("ðŸ“ à¸£à¹‰à¸²à¸™à¸­à¸²à¸«à¸²à¸£à¸—à¸µà¹ˆà¹à¸™à¸°à¸™à¸³:")
if not filtered.empty:
    for i, row in filtered.iterrows():
        st.markdown(f"- **{row['à¸Šà¸·à¹ˆà¸­à¸£à¹‰à¸²à¸™']}** ({row['à¸›à¸£à¸°à¹€à¸ à¸—']}, à¸¿{row['à¸£à¸²à¸„à¸²']}, {row['à¸žà¸·à¹‰à¸™à¸—à¸µà¹ˆ']})")
else:
    st.info("à¹„à¸¡à¹ˆà¸žà¸šà¸£à¹‰à¸²à¸™à¸­à¸²à¸«à¸²à¸£à¸—à¸µà¹ˆà¸•à¸£à¸‡à¸à¸±à¸šà¹€à¸‡à¸·à¹ˆà¸­à¸™à¹„à¸‚ à¸¥à¸­à¸‡à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸•à¸±à¸§à¹€à¸¥à¸·à¸­à¸à¸”à¸¹à¸™à¸°")

